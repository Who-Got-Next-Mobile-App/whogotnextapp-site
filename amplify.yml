version: 1
frontend:
  phases:
    preBuild:
      commands:
        - nvm use 22 || nvm install 22
        - node -v
        - npm ci
    build:
      commands:
        - npm run build
        - cp package.json .next/package.json
        - cp package-lock.json .next/package-lock.json
        - cp next.config.mjs .next/next.config.mjs
        - cp -r node_modules .next/node_modules
        - cp -r public .next/public
  artifacts:
    baseDirectory: .next
    files:
      - "**/*"
  cache:
    paths:
      - node_modules/**/*
